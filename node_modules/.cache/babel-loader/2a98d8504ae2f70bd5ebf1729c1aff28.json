{"remainingRequest":"/Users/jin/Desktop/v-cloud-feature-common-component/token-service/wallet/ui/node_modules/thread-loader/dist/cjs.js!/Users/jin/Desktop/v-cloud-feature-common-component/token-service/wallet/ui/node_modules/babel-loader/lib/index.js!/Users/jin/Desktop/v-cloud-feature-common-component/token-service/wallet/ui/node_modules/vuetify-loader/lib/loader.js!/Users/jin/Desktop/v-cloud-feature-common-component/token-service/wallet/ui/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/jin/Desktop/v-cloud-feature-common-component/token-service/wallet/ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jin/Desktop/v-cloud-feature-common-component/token-service/wallet/ui/src/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jin/Desktop/v-cloud-feature-common-component/token-service/wallet/ui/src/App.vue","mtime":1585119550000},{"path":"/Users/jin/Desktop/v-cloud-feature-common-component/token-service/wallet/ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jin/Desktop/v-cloud-feature-common-component/token-service/wallet/ui/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jin/Desktop/v-cloud-feature-common-component/token-service/wallet/ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jin/Desktop/v-cloud-feature-common-component/token-service/wallet/ui/node_modules/vuetify-loader/lib/loader.js","mtime":1564062719000},{"path":"/Users/jin/Desktop/v-cloud-feature-common-component/token-service/wallet/ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jin/Desktop/v-cloud-feature-common-component/token-service/wallet/ui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\nimport router from \"./router\";\nimport store from \"./store\";\nrouter.beforeEach((to, from, next) => {\n  // eslint-disable-next-line no-unused-vars\n  const {\n    path,\n    meta\n  } = to;\n  const {\n    requireLogin\n  } = meta; //determine loginType, update loginType & sendInfo\n\n  if (!store.state.loginType && Object.keys(to.query).length !== 0) {\n    store.commit(\"update_loginType\", \"send\");\n    store.commit(\"update_sendInfo\", to.query);\n  }\n\n  if (to.path == \"/\") {\n    // clear vuex content\n    store.replaceState(Object.assign({}, store.state, {})); // if registered\n\n    if (window.localStorage[\"encryptSeed\"]) {\n      return next();\n    } else {\n      return next({\n        path: \"/create\",\n        query: to.query\n      });\n    }\n  }\n\n  if (!requireLogin) next(); // Not Require Logining\n  else if (store.state.password) next(); //Have logined\n    else {\n        if (store.state.loginType === \"send\") {\n          next({\n            path: \"/\",\n            query: to.query\n          });\n        } else {\n          next({\n            path: \"/\",\n            params: {\n              back: to\n            }\n          });\n        }\n      }\n});\nrouter.afterEach((to, from) => {\n  //add query\n  if (to.path !== \"/home/send/finish\" && Object.keys(from.query).length !== 0 && Object.keys(to.query).length === 0) {\n    router.push({\n      path: to.path,\n      query: from.query\n    });\n  }\n});\n\nfunction debounce(func, delay) {\n  let timeout;\n  return function () {\n    clearTimeout(timeout);\n    timeout = setTimeout(() => {\n      func.apply(this, arguments);\n    }, delay);\n  };\n}\n\nexport default {\n  name: \"App\",\n  data: () => ({\n    loginTimer: \"\"\n  }),\n  methods: {\n    resetTimer() {\n      clearTimeout(this.loginTimer);\n      let timeout = window.localStorage[\"sessionTimeout\"];\n      if (!timeout) return;\n      this.loginTimer = setTimeout(() => {\n        if (this.$store.state.password && this.$route.path !== \"/\" && this.$route.path !== \"/create\" && this.$route.path !== \"/restore\") {\n          this.$router.replace({\n            path: \"/\"\n          });\n        }\n      }, timeout * 60 * 1000);\n    }\n\n  },\n\n  mounted() {\n    document.addEventListener(\"mousemove\", debounce(() => {\n      this.resetTimer();\n    }, 1000));\n    document.addEventListener(\"mousedown\", debounce(() => {\n      this.resetTimer();\n    }, 1000));\n    document.addEventListener(\"touchstart\", debounce(() => {\n      this.resetTimer();\n    }, 1000));\n  }\n\n};",null]}